// Contract with an Unchecked External Call Return Value vulnerability
outputStruct main(inputStruct in) {
    outputStruct out;
    long long contract_balance = get_contract_balance();

    // This contract acts as a middleman, forwarding a payment.
    if (in.functionName == "forwardPayment") {
        char* destination = get_string_from_params(in.params, 0);
        long long amount = get_long_long_from_params(in.params, 1);

        if (contract_balance >= amount) {
            // VULNERABILITY: send_funds might return `false` if the destination
            // is a contract that rejects the payment, or for other reasons.
            // The code doesn't check the return value, and assumes it worked.
            // This would leave the funds in this contract, but the state might
            // be updated as if it succeeded.
            send_funds(destination, amount);

            // The contract might then update some internal state, believing the send was successful.
            // e.g., save_int_state("last_payment_successful", 1);
            // This leads to an inconsistent state.

            out.success = true; // Reports success even if send_funds failed.
        }
    }

    return out;
}
